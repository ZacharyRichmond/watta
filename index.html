

<!DOCTYPE html>
<html>
<head>
<title>Balls1</title>
  <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
</head>
<body>

<canvas id="myCanvas" style="border:2px solid"></canvas>
  <script>

var canvas = document.getElementById("myCanvas");
  var c = canvas.getContext("2d");

  canvas.width = window.innerWidth - 20;
  canvas.height = window.innerHeight - 100;

  var simMinWidth = 20.0;
  var cScale = Math.min(canvas.width, canvas.height) / simMinWidth;
  var simWidth = canvas.width / cScale;
  var simHeight = canvas.height / cScale;
    const ball=[];
  function addWater(xi,yi,ri,xveli,yveli){
    ball.push({pos:{x:xi,y:yi},vel:{x:xveli,y:yveli},r:ri});
  }

    function dot(v1,v2){
      return v1.x*v2.x+v1.y*v2.y;
    }
    function mag(v){
      return Math.sqrt(v.x*v.x+v.y*v.y);
    }
    function addv(v1,v2){
      return{x:v1.x+v2.x,y:v1.y+v2.y};
    }
    function subtractv(v1,v2){
      return {x:v1.x-v2.x,y:v1.y-v2.y};
    }

  function cX(pos) {
    return pos.x * cScale;
  }

  function cY(pos) {
    return canvas.height - pos.y * cScale;
  }

  // scene -------------------------------------------------------

  var gravity = { x: 0.0, y: -9.8};
  var dt = 1.0 / 60.0;
  // drawing -------------------------------------------------------

  function draw() {
    c.clearRect(0, 0, canvas.width, canvas.height);
    c.font = "48px serif";
  c.fillText(String(bounce), 10, 50);
      c.fillStyle = "#0000FF";
 c.beginPath();			
    c.arc(
      cX(ball[0].pos), cY(ball[0].pos), cScale * ball[0].r, 0.0, 2.0 * Math.PI); 
    c.closePath();
          c.fill();	
    c.fillStyle = "#FF0000";
for(var i =1;i<ball.length;i++){
    c.beginPath();			
    c.arc(
      cX(ball[i].pos), cY(ball[i].pos), cScale * ball[i].r, 0.0, 2.0 * Math.PI); 
    c.closePath();
          c.fill();	
}
  }

  // simulation ----------------------------------------------------

 

  function simulate() {
  for(var i =0;i<ball.length;i++){
    ball[i].vel.x += gravity.x * dt;
    ball[i].vel.y += gravity.y * dt;
    ball[i].pos.x += ball[i].vel.x * dt;
    ball[i].pos.y+= ball[i].vel.y * dt;

    if (ball[i].pos.x < 0.0+ball[i].r) {
      ball[i].pos.x = 0.0+ball[i].r;
      ball[i].vel.x = 0;
    }
    if (ball[i].pos.x > simWidth-ball[i].r) {
      ball[i].pos.x = simWidth-ball[i].r;
      ball[i].vel.x= 0;
    }
    if (ball[i].pos.y < 0.0+ball[i].r) {
      ball[i].pos.y = 0.0+ball[i].r;
      ball[i].vel.y =0
        //-ball[i].vel.y;
    }
    if (ball[i].pos.y > simHeight-ball[i].r) {
      ball[i].pos.y =simHeight-ball[i].r;
      ball[i].vel.y = 0;
        -ball[i].vel.y;
    }
  }
  }

  // make browser to call us repeatedly -----------------------------------
var hor=0;
    var ver=0;
    var left=false;
    var right=false;
    var up=false;
    var down =false;
    var speedy=false;
    var speed=150;
  function update() {
   // console.log("hi");
    if(speedy){
      speed=5*150;
    }
    else{
      speed=150;
    }
  ball[0].vel.x = speed*hor;
   ball[0].vel.y = speed*ver;
    if(left && right){
      hor=0;
    }
    else if(left){
    hor=-0.1;
    }
    else if(right){
    hor=0.1;
    }
    else{
    hor=0;
    }
    if(up && down){
      ver=0;
    }
    else if(down){
    ver=-0.1;
    }
    else if(up){
    ver=0.1;
    }
    else{
    ver=0;
    }
    
   document.addEventListener('keydown', function(event) {
        if(event.keyCode == 37) {
          
          left=true;
        }
        else if(event.keyCode == 39) {
          right=true;
        }
       else if(event.keyCode == 38) {
          
          up=true;
        }
        else if(event.keyCode == 40) {
          down=true;
        }
      else if(event.keyCode == 49) {
          speedy=true;
        }
     });
     
    document.addEventListener('keyup', function(event) {
        if(event.keyCode == 37) {
         left=false;
        }
        else if(event.keyCode == 39) {
          right=false;
        }
        else if(event.keyCode == 38) {
          
          up=false;
        }
        else if(event.keyCode == 40) {
          down=false;
        }
       else if(event.keyCode == 49) {
          speedy=false;
        }
     });
    simulate();
    checkCollisions();
    draw();
    requestAnimationFrame(update);
  }
addBall(20,20,0.6,0,0);
    addBall(10,10,0.2,-5,1);
    addBall(1,3,0.2,5,-1);
    addBall(6,9,0.7,-5,3);
    addBall(13,10,1.2,5,0.1);
    addBall(15,15,0.9,-5,-2);
    addBall(7,0,1.8,0,0);
    addBall(30,10,0.2,-5,1);
    addBall(31,3,0.2,5,-1);
    addBall(36,9,0.7,-5,3);
    addBall(40,10,1.2,5,0.1);
    addBall(35,15,0.9,-5,-2);
    addBall(37,3,1.8,0,0);
    
 update();

  </script>

</body>
</html>
